<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "src/org/apache/ibatis/builder/xml/mybatis-3-mapper.dtd"> 
<mapper namespace="int">
	
	<select id="selectLimitConnectionCount" resultType="java.lang.Integer">
	SELECT  limit_connection_count as limitConnectionCount
    FROM intg_project_status
	</select>
	
	<select id="selectInterfaceDateInfo" resultType="DataSyncInfo">
	SELECT cutover_start_date as cutoverStartDate,
	       cutover_end_date as cutoverEndDate,
	       defect_start_date as defectStartDate,
	       defect_end_date as defectEndDate
	FROM intg_project_status
	</select>
	
	
	<select id="selectMainResourceInfo" resultType="HashMap">
	SELECT url,
		   resource_id as resourceId,
		   resource_name as resourceName,
		   resource_type as resourceType,
		   resource_content as resourceContent 
	FROM intg_resource 
	WHERE resource_id = (
	SELECT  main_resource_id as mainResourceId
    FROM intg_project_status)
    limit 1
	</select>
	
	<select id="selecDataSyncInfo" resultType="DataSyncInfo" parameterType="DataSyncInfo">
	select sync_type as syncType,
	       last_sync_date as lastSyncDate
	from intg_data_sync_info
	where sync_type = #{syncType}
	</select>
	
	<update id="updateDataSyncInfo" parameterType="DataSyncInfo">
	update intg_data_sync_info
	set last_sync_date = #{lastSyncDate}
	where sync_type = #{syncType}
	</update>
	
	<insert id="insertDataSyncInfo" parameterType="DataSyncInfo">
	insert into intg_data_sync_info (sync_type, last_sync_date)
	values (#{syncType}, #{lastSyncDate})
	</insert>
</mapper>